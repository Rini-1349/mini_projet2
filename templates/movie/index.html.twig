{% extends 'base.html.twig' %}

{% block title %}{{ movie.name }} | The best movies ever{% endblock %}

{% block body %}
    <div class="container">
        <div class="row mb-2 justify-content-center">
            <div class="col-md-10 col-12">
                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                    <div class="card-body d-flex flex-column align-items-start">
                        <strong class="d-inline-block mb-2 text-primary">{{ movie.type }}</strong>
                        <h3 class="mb-3">
                            {{ movie.name }}
                        </h3>
                        <p class="mb-0 card-text">Réalisateur: {{ movie.director }}</p>
                        <p class="mb-0 card-text">Durée: {{ movie.duration }}</p>
                        <div>Note: {{ movieAverageNotation }}/5</div>
                        <div class="mt-5 mb-3 d-flex">
                            <div class="mr-3 fb-share-button" data-href="{{ app.request.uri }}" data-layout="button" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=" . urlencode({{ app.request.uri }})"F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Partager</a></div>
                            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false">Tweet</a>
                            <input type="hidden" value="{{ app.request.uri }}" id="url">
                            <button type="button" class="btn btn-secondary btn-sm ml-3" onclick="copyUrl()">Copier l'url</button>
                        </div>
                    </div>
                    <img class="card-img-right img-fluid" src="{{ movie.illustration }}" width="200" height="250" alt="Card image cap">
                </div>
            </div>
        </div>
        <div class="col-md-10 col-12 m-auto">
            {% form_theme form 'bootstrap_4_layout.html.twig' %}
            {{ form(form) }}
        </div>
        <div class="col-md-10 col-12 m-auto">
            {% for comment in movie.comments %}
                <div>{{ comment.author }}</div>
                <div>Le {{ comment.createdAt|date("d/m/Y à H:i", "Europe/Paris") }}</div>
                <div>{{ comment.message }}</div>
            {% endfor %}
        </div>
    </div>
{% block javascripts %}
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v9.0" nonce="20Ey9kpW"></script>
<script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>
<script>
function copyUrl() {
  var copyText = document.getElementById("url");
  copyText.select();
  copyText.setSelectionRange(0, 99999)
  document.execCommand("copy");
  alert("L'url " + copyText.value + " a été copiée");
}
</script>
{% endblock %}
{% endblock %}
